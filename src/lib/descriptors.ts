import { hash32 } from "@/lib/hash";

/**
 * Curated descriptor bank for invention generation.
 *
 * Goals:
 * - Push variety (LLMs tend to converge on similar inventions without constraints)
 * - Keep prompts grounded and comedic
 * - Keep this list STABLE for determinism; bump INVEST_DAILY_SEED_VERSION to reshuffle.
 *
 * Note: This initial list is "LLM generated to start" and intended to be edited/pruned over time.
 */
export const INVENTION_DESCRIPTORS: readonly string[
  ] = [
  "parched",
  "treat",
  "bat",
  "channel",
  "neat",
  "dynamic",
  "high",
  "calendar",
  "exultant",
  "rhyme",
  "horrible",
  "full",
  "arithmetic",
  "pickle",
  "moon",
  "placid",
  "brown",
  "fluffy",
  "verse",
  "optimal",
  "fantastic",
  "drawer",
  "bottle",
  "envious",
  "detect",
  "drain",
  "things",
  "boot",
  "quarrelsome",
  "team",
  "religion",
  "clear",
  "exclusive",
  "capricious",
  "wrap",
  "belong",
  "chivalrous",
  "extra-large",
  "beam",
  "pointless",
  "large",
  "aberrant",
  "sign",
  "shivering",
  "wash",
  "mass",
  "keen",
  "bushes",
  "self",
  "diligent",
  "tough",
  "fierce",
  "park",
  "feigned",
  "snotty",
  "brake",
  "depend",
  "grandfather",
  "beginner",
  "queue",
  "pencil",
  "substance",
  "trees",
  "impolite",
  "laugh",
  "home",
  "eggs",
  "deserted",
  "aboriginal",
  "smiling",
  "temporary",
  "possessive",
  "enter",
  "head",
  "nondescript",
  "humorous",
  "undesirable",
  "daughter",
  "rapid",
  "flap",
  "squeak",
  "juicy",
  "inconclusive",
  "company",
  "glorious",
  "grin",
  "scared",
  "materialistic",
  "lumpy",
  "nest",
  "occur",
  "cub",
  "helpful",
  "piquant",
  "sleepy",
  "obnoxious",
  "satisfying",
  "fang",
  "move",
  "peace",
  "basketball",
  "adjoining",
  "symptomatic",
  "eager",
  "battle",
  "stereotyped",
  "wasteful",
  "offer",
  "windy",
  "blade",
  "food",
  "size",
  "automatic",
  "sordid",
  "watery",
  "egg",
  "recondite",
  "stone",
  "dinosaurs",
  "dull",
  "third",
  "nimble",
  "pat",
  "share",
  "bomb",
  "black-and-white",
  "cheese",
  "pets",
  "chief",
  "abstracted",
  "analyze",
  "flagrant",
  "weak",
  "strange",
  "flock",
  "joke",
  "sick",
  "kneel",
  "goofy",
  "cynical",
  "canvas",
  "ten",
  "cause",
  "structure",
  "fancy",
  "matter",
  "cagey",
  "tail",
  "defiant",
  "suggestion",
  "friend",
  "dad",
  "sack",
  "deceive",
  "jittery",
  "oil",
  "few",
  "fuzzy",
  "inform",
  "delay",
  "nice",
  "carve",
  "silky",
  "boorish",
  "blink",
  "fit",
  "omniscient",
  "office",
  "zipper",
  "love",
  "fork",
  "rob",
  "shock",
  "needless",
  "cycle",
  "tendency",
  "unequal",
  "communicate",
  "blush",
  "sweltering",
  "monkey",
  "fixed",
  "test",
  "boiling",
  "fry",
  "aunt",
  "guitar",
  "sun",
  "plane",
  "decide",
  "old-fashioned",
  "well-groomed",
  "panoramic",
  "spray",
  "balance",
  "stew",
  "bite-sized",
  "roll",
  "fat",
  "list",
  "receipt",
  "dusty",
  "chew",
  "fretful",
  "agreeable",
  "safe",
  "stop",
  "van",
  "regret",
  "alert",
  "cast",
  "bed",
  "productive",
  "wide-eyed",
  "steel",
  "table",
  "trucks",
  "trust",
  "temper",
  "shade",
  "statement",
  "lame",
  "hook",
  "defective",
  "distribution",
  "admire",
  "glove",
  "day",
  "scissors",
  "breath",
  "wriggle",
  "look",
  "payment",
  "fly",
  "ethereal",
  "dazzling",
  "fear",
  "celery",
  "respect",
  "advice",
  "anger",
  "mitten",
  "shoe",
  "madly",
  "destruction",
  "nifty",
  "bite",
  "super",
  "mist",
  "wine",
  "married",
  "miscreant",
  "dime",
  "minute",
  "develop",
  "tap",
  "versed",
  "screw",
  "expansion",
  "join",
  "exercise",
  "mind",
  "memorize",
  "floor",
  "cabbage",
  "dreary",
  "face",
  "peel",
  "psychedelic",
  "handsome",
  "parcel",
  "acoustics",
  "humor",
  "lace",
  "marvelous",
  "wander",
  "alcoholic",
  "knock",
  "somber",
  "zinc",
  "paint",
  "press",
  "veil",
  "toothbrush",
  "public",
  "surround",
  "melodic",
  "plants",
  "jazzy",
  "flow",
  "hideous",
  "foot",
  "ablaze",
  "slippery",
  "hydrant",
  "ban",
  "debt",
  "cool",
  "cheerful",
  "old",
  "authority",
  "army",
  "flag",
  "thoughtful",
  "observe",
  "examine",
  "quiver",
  "board",
  "quixotic",
  "rain",
  "pedal",
  "part",
  "jobless",
  "distance",
  "vest",
  "grouchy",
  "invite",
  "vessel",
  "four",
  "incompetent",
  "rake",
  "grease",
  "plastic",
  "friends",
  "compare",
  "spoil",
  "breakable",
  "decorate",
  "tax",
  "caring",
  "melt",
  "amuse",
  "bead",
  "fuel",
  "irritate",
  "development",
  "zoom",
  "field",
  "bore",
  "dispensable",
  "absent",
  "program",
  "alike",
  "picayune",
  "lick",
  "bruise",
  "river",
  "rate",
  "tangible",
  "worthless",
  "slave",
  "coast",
  "trouble",
  "tremendous",
  "water",
  "rifle",
  "gullible",
  "cars",
  "grade",
  "attract",
  "real",
  "dark",
  "snakes",
  "fragile",
  "weight",
  "spotty",
  "punish",
  "actor",
  "underwear",
  "fortunate",
  "thumb",
  "sky",
  "quarter",
  "edge",
  "reign",
  "sea",
  "blushing",
  "escape",
  "wrestle",
  "peep",
  "float",
  "gaudy",
  "trace",
  "poke",
  "bulb",
  "long",
  "skin",
  "surprise",
  "practice",
  "cheer",
  "lamp",
  "alive",
  "profit",
  "flower",
  "shut",
  "turkey",
  "frightened",
  "roof",
  "rabbit",
  "obsolete",
  "pathetic",
  "collar",
  "prick",
  "hands",
  "familiar",
  "squeeze",
  "dizzy",
  "scarecrow",
  "calculator",
  "range",
  "view",
  "habitual",
  "giddy",
  "vague",
  "ajar",
  "comfortable",
  "buzz",
  "boundless",
  "conscious",
  "cure",
  "gun",
  "powder",
  "appear",
  "pen",
  "songs",
  "page",
  "insurance",
  "secret",
  "rush",
  "spectacular",
  "entertain",
  "approval",
  "ants",
  "strong",
  "narrow",
  "adjustment",
  "uptight",
  "snails",
  "thundering",
  "meek",
  "ski",
  "enjoy",
  "friendly",
  "homely",
  "futuristic",
  "wacky",
  "scandalous",
  "waste",
  "robust",
  "children",
  "humdrum",
  "highfalutin",
  "horn",
  "uppity",
  "offend",
  "silk",
  "abhorrent",
  "attempt",
  "society",
  "mountain",
  "wealthy",
  "pin",
  "stranger",
  "excellent",
  "cooing",
  "weather",
  "rail",
  "swing",
  "terrific",
  "rhetorical",
  "nod",
  "craven",
  "fresh",
  "hose",
  "nostalgic",
  "aquatic",
  "distinct",
  "doll",
  "unbiased",
  "ambitious",
  "pies",
  "colour",
  "pie",
  "basket",
  "spade",
  "connect",
  "unadvised",
  "puzzling",
  "risk",
  "internal",
  "decorous",
  "educated",
  "shirt",
  "parsimonious",
  "memory",
  "geese",
  "horses",
  "inquisitive",
  "school",
  "secretary",
  "remind",
  "flowery",
  "bell",
  "brief",
  "faulty",
  "manage",
  "taboo",
  "workable",
  "prepare",
  "writing",
  "succinct",
  "encourage",
  "disapprove",
  "amount",
  "cowardly",
  "leather",
  "flesh",
  "electric",
  "actually",
  "greasy",
  "discovery",
  "instinctive",
  "toad",
  "punch",
  "sock",
  "growth",
  "grumpy",
  "treatment",
  "cook",
  "scrub",
  "turn",
  "flood",
  "like",
  "delicious",
  "spy",
  "end",
  "competition",
  "auspicious",
  "type",
  "zephyr",
  "magic",
  "scratch",
  "wrist",
  "jolly",
  "gaze",
  "tricky",
  "chop",
  "art",
  "lumber",
  "useful",
  "elderly",
  "ink",
  "claim",
  "stare",
  "tin",
  "border",
  "mother",
  "thin",
  "succeed",
  "square",
  "lucky",
  "fall",
  "window",
  "frantic",
  "disillusioned",
  "pet",
  "pollution",
  "petite",
  "unhealthy",
  "previous",
  "infamous",
  "attend",
  "voyage",
  "driving",
  "unite",
  "friction",
  "tire",
  "bad",
  "merciful",
  "reject",
  "accidental",
  "worried",
  "measly",
  "true",
  "decision",
  "imaginary",
  "zonked",
  "spotted",
  "fill",
  "unsuitable",
  "literate",
  "handy",
  "blow",
  "functional",
  "quizzical",
  "kindly",
  "mess up",
  "stir",
  "rub",
  "squalid",
  "painful",
  "note",
  "spill",
  "coherent",
  "mice",
  "value",
  "gainful",
  "appreciate",
  "suffer",
  "half",
  "include",
  "questionable",
  "nappy",
  "rainy",
  "holistic",
  "jelly",
  "cakes",
  "tested",
  "clumsy",
  "reach",
  "pastoral",
  "choke",
  "hole",
  "dream",
  "draconian",
  "early",
  "useless",
  "victorious",
  "damaging",
  "adamant",
  "abnormal",
  "silly",
  "oceanic",
  "cry",
  "knotty",
  "determined",
  "cap",
  "swim",
  "obtain",
  "expert",
  "unknown",
  "burn",
  "loss",
  "ubiquitous",
  "writer",
  "cuddly",
  "hypnotic",
  "difficult",
  "meddle",
  "same",
  "spark",
  "tub",
  "bewildered",
  "ship",
  "glib",
  "helpless",
  "challenge",
  "jewel",
  "well-made",
  "knot",
  "miss",
  "wall",
  "physical",
  "mate",
  "sincere",
  "street",
  "known",
  "incredible",
  "erratic",
  "store",
  "yummy",
  "flowers",
  "bikes",
  "attach",
  "juvenile",
  "glass",
  "shelf",
  "elated",
  "rule",
  "describe",
  "terrify",
  "colorful",
  "men",
  "lunchroom",
  "even",
  "pancake",
  "shoes",
  "wrong",
  "massive",
  "stuff",
  "glow",
  "muddled",
  "beef",
  "own",
  "volcano",
  "harbor",
  "quick",
  "fine",
  "arrange",
  "locket",
  "improve",
  "rely",
  "level",
  "innocent",
  "absorbed",
  "invincible",
  "mighty",
  "repeat",
  "macabre",
  "testy",
  "person",
  "kill",
  "scarf",
  "soothe",
  "thank",
  "plant",
  "dislike",
  "compete",
  "awful",
  "abiding",
  "bounce",
  "bump",
  "obscene",
  "amazing",
  "ordinary",
  "supply",
  "arm",
  "chin",
  "bury",
  "guess",
  "amused",
  "direction",
  "onerous",
  "moaning",
  "raspy",
  "roasted",
  "wail",
  "vase",
  "cold",
  "fold",
  "teeny-tiny",
  "produce",
  "frogs",
  "general",
  "lethal",
  "pear",
  "able",
  "jaded",
  "pack",
  "idiotic",
  "laborer",
  "cheat",
  "odd",
  "aboard",
  "suit",
  "smile",
  "north",
  "pizzas",
  "immense",
  "resonant",
  "cows",
  "achiever",
  "crow",
  "ashamed",
  "machine",
  "hollow",
  "bucket",
  "short",
  "warlike",
  "naughty",
  "bitter",
  "impartial",
  "responsible",
  "hum",
  "belief",
  "mom",
  "skillful",
  "caption",
  "lovely",
  "drink",
  "tug",
  "pig",
  "rescue",
  "fair",
  "kind",
  "coat",
  "chickens",
  "march",
  "rainstorm",
  "interesting",
  "curtain",
  "harmonious",
  "vacuous",
  "deserve",
  "sturdy",
  "desk",
  "crowd",
  "request",
  "thought",
  "guarantee",
  "expensive",
  "silver",
  "representative",
  "knowing",
  "suspend",
  "better",
  "lamentable",
  "spiders",
  "knife",
  "prose",
  "waiting",
  "engine",
  "reaction",
  "recess",
  "sharp",
  "bleach",
  "dapper",
  "church",
  "thirsty",
  "donkey",
  "mark",
  "curl",
  "mammoth",
  "letters",
  "ill",
  "decisive",
  "gigantic",
  "complex",
  "childlike",
  "gleaming",
  "disappear",
  "big",
  "beds",
  "creepy",
  "smash",
  "solid",
  "seed",
  "quince",
  "observation",
  "squealing",
  "wave",
  "jump",
  "lonely",
  "reflect",
  "rock",
  "aspiring",
  "nine",
  "paltry",
  "crib",
  "scrape",
  "raise",
  "elbow",
  "bear",
  "pigs",
  "quickest",
  "military",
  "creature",
  "girls",
  "cracker",
  "supreme",
  "belligerent",
  "fog",
  "wide",
  "unbecoming",
  "tiny",
  "hover",
  "nebulous",
  "skate",
  "pass",
  "branch",
  "sloppy",
  "bedroom",
  "assorted",
  "downtown",
  "magical",
  "pot",
  "puzzled",
  "sheep",
  "bloody",
  "deadpan",
  "butter",
  "coach",
  "tramp",
  "rest",
  "phone",
  "gorgeous",
  "thankful",
  "force",
  "easy",
  "gate",
  "pail",
  "mixed",
  "dirt",
  "prefer",
  "doctor",
  "whine",
  "plan",
  "twist",
  "future",
  "unfasten",
  "uninterested",
  "detailed",
  "wood",
  "ask",
  "truthful",
  "disarm",
  "naive",
  "rustic",
  "ahead",
  "seat",
  "kiss",
  "license",
  "pick",
  "desert",
  "heal",
  "coil",
  "new",
  "repair",
  "offbeat",
  "nutritious",
  "different",
  "closed",
  "bawdy",
  "use",
  "fax",
  "makeshift",
  "shiny",
  "last",
  "laughable",
  "reminiscent",
  "loose",
  "dependent",
  "bustling",
  "crush",
  "sand",
  "leg",
  "unusual",
  "interrupt",
  "middle",
  "apparel",
  "unit",
  "babies",
  "adaptable",
  "careless",
  "error",
  "mere",
  "miniature",
  "signal",
  "painstaking",
  "allow",
  "snake",
  "political",
  "replace",
  "overrated",
  "follow",
  "attraction",
  "calculating",
  "deeply",
  "eminent",
  "thinkable",
  "lopsided",
  "hobbies",
  "satisfy",
  "reward",
  "road",
  "sister",
  "night",
  "direful",
  "clam",
  "imperfect",
  "tie",
  "wound",
  "wrench",
  "visit",
  "polite",
  "pretend",
  "astonishing",
  "obese",
  "silent",
  "trite",
  "system",
  "stain",
  "stimulating",
  "jagged",
  "suppose",
  "cobweb",
  "theory",
  "whole",
  "mourn",
  "instruct",
  "oranges",
  "wilderness",
  "plucky",
  "launch",
  "experience",
  "selective",
  "gusty",
  "ugly",
  "sleet",
  "chalk",
];

function normalizeDescriptor(s: string): string {
  return String(s || "").trim().toLowerCase();
}

/**
 * Deterministically picks N distinct descriptors for a given seed, optionally
 * avoiding a provided set of already-used descriptors (normalized).
 */
export function pickDescriptors(args: {
  seed: string;
  count: number;
  avoidNormalized?: Set<string>;
}): string[] {
  const list = INVENTION_DESCRIPTORS;
  const avoid = args.avoidNormalized ?? new Set<string>();
  const count = Math.max(1, Math.min(args.count, 6));
  if (list.length === 0) return [];

  const out: string[] = [];
  const used = new Set<string>();

  // Open addressing: keep stepping until we fill count or we hit a reasonable cap.
  const base = hash32(args.seed);
  const cap = Math.min(list.length * 3, 1200);

  for (let step = 0; step < cap && out.length < count; step++) {
    const idx = (base + step * 2654435761) % list.length;
    const raw = list[idx] ?? "";
    const norm = normalizeDescriptor(raw);
    if (!norm) continue;
    if (avoid.has(norm)) continue;
    if (used.has(norm)) continue;
    used.add(norm);
    out.push(raw);
  }

  return out;
}


